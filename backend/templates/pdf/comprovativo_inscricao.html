
{% extends "pdf/base_documento.html" %}

{% block content %}
<style>
    .header-box {
        text-align: center;
        margin-bottom: 30px;
        border-bottom: 3px double #1e3a8a;
        padding-bottom: 15px;
    }
    .doc-title {
        font-size: 22pt;
        font-weight: bold;
        color: #1e3a8a;
        text-transform: uppercase;
        letter-spacing: 2px;
        margin: 5px 0;
    }
    .doc-subtitle {
        font-size: 10pt;
        color: #64748b;
        text-transform: uppercase;
    }
    .highlight-box {
        background-color: #f1f5f9;
        border: 1px solid #cbd5e1;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 25px;
    }
    .section-title {
        font-size: 12pt;
        font-weight: bold;
        color: #1e3a8a;
        border-bottom: 1px solid #e2e8f0;
        padding-bottom: 5px;
        margin-top: 20px;
        margin-bottom: 10px;
        text-transform: uppercase;
    }
    .info-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 10pt;
    }
    .info-table td {
        padding: 6px 4px;
        border-bottom: 1px dotted #e2e8f0;
    }
    .label {
        font-weight: bold;
        color: #475569;
        width: 35%;
    }
    .value {
        color: #0f172a;
        font-weight: 500;
    }
    .photo-box {
        width: 120px;
        height: 150px;
        border: 1px solid #cbd5e1;
        background: #f8fafc;
        text-align: center;
        margin-left: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
    }
    .status-badge {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 4px;
        font-weight: bold;
        font-size: 9pt;
        text-transform: uppercase;
    }
    .status-pago { background: #dcfce7; color: #166534; border: 1px solid #86efac; }
    .status-pendente { background: #fff7ed; color: #9a3412; border: 1px solid #fed7aa; }
    
    .convocatoria-box {
        border: 2px solid #1e3a8a;
        background: #eff6ff;
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        margin-top: 30px;
    }
</style>

<div class="header-box">
    <div class="doc-title">Ficha de Inscrição</div>
    <div class="doc-subtitle">Comprovativo de Registo de Candidatura - Ano Lectivo 2026/2027</div>
</div>

<div class="highlight-box" style="text-align: center;">
    <span style="font-size: 10pt; color: #64748b;">NÚMERO DE INSCRIÇÃO</span><br>
    <strong style="font-size: 18pt; color: #0f172a; letter-spacing: 2px;">{{ candidato.numero_inscricao }}</strong>
</div>

<!-- Main Layout: 2 Columns for Info, 1 for Photo -->
<table style="width: 100%; vertical-align: top;">
    <tr>
        <!-- Left Column: Personal Data -->
        <td style="width: 70%; padding-right: 20px; vertical-align: top;">
            <div class="section-title">Dados Pessoais</div>
            <table class="info-table">
                <tr>
                    <td class="label">NOME COMPLETO</td>
                    <td class="value">{{ candidato.nome_completo|upper }}</td>
                </tr>
                <tr>
                    <td class="label">BILHETE DE IDENTIDADE</td>
                    <td class="value">{{ candidato.numero_bi }}</td>
                </tr>
                <tr>
                    <td class="label">DATA DE NASCIMENTO</td>
                    <td class="value">{{ candidato.data_nascimento|date:"d/m/Y" }} ({{ candidato.getIdade }} anos)</td>
                </tr>
                 <tr>
                    <td class="label">GÉNERO</td>
                    <td class="value">{{ candidato.get_genero_display }}</td>
                </tr>
                <tr>
                    <td class="label">CONTACTO</td>
                    <td class="value">{{ candidato.telefone }}</td>
                </tr>
            </table>

            <div class="section-title">Opções Académicas</div>
            <table class="info-table">
                <tr>
                    <td class="label">1ª OPÇÃO DE CURSO</td>
                    <td class="value" style="font-weight: bold;">{{ candidato.curso_primeira_opcao.nome_curso }}</td>
                </tr>
                {% if candidato.curso_segunda_opcao %}
                <tr>
                    <td class="label">2ª OPÇÃO DE CURSO</td>
                    <td class="value">{{ candidato.curso_segunda_opcao.nome_curso }}</td>
                </tr>
                {% endif %}
                <tr>
                    <td class="label">TURNO PREFERENCIAL</td>
                    <td class="value">{{ candidato.turno_preferencial|default:"Qualquer" }}</td>
                </tr>
            </table>
        </td>

        <!-- Right Column: Photo -->
        <td style="width: 30%; vertical-align: top;">
            <div class="photo-box">
                {% if candidato.foto_passe %}
                    <img src="{{ candidato.foto_passe.path }}" style="width: 100%; height: 100%; object-fit: cover;" />
                {% else %}
                    <div style="padding-top: 60px; color: #cbd5e1; font-weight: bold;">FOTO</div>
                {% endif %}
            </div>
            <div style="text-align: center; margin-top: 10px; margin-left: 20px;">
                <div style="font-size: 8pt; color: #64748b;">ESTADO DA CANDIDATURA</div>
                <div style="font-weight: bold; font-size: 11pt; color: #0f172a; margin-top: 2px;">{{ candidato.status|upper }}</div>
            </div>
        </td>
    </tr>
</table>

<!-- Payment Section -->
{% if rupe %}
<div class="section-title">Dados de Emolumentos</div>
<table style="width: 100%; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 6px; padding: 10px;">
    <tr>
        <td style="width: 25%; font-size: 9pt; color: #64748b;">REFERÊNCIA RUPE</td>
        <td style="width: 25%; font-weight: bold; font-family: monospace; font-size: 11pt;">{{ rupe.referencia }}</td>
        <td style="width: 15%; font-size: 9pt; color: #64748b;">VALOR</td>
        <td style="width: 15%; font-weight: bold;">{{ rupe.valor }} Kz</td>
        <td style="width: 20%; text-align: right;">
             {% if rupe.status == 'Pago' %}
                <span class="status-badge status-pago">PAGO</span>
            {% else %}
                <span class="status-badge status-pendente">{{ rupe.status|upper }}</span>
            {% endif %}
        </td>
    </tr>
</table>
{% endif %}

<!-- Exam Convocatoria -->
{% if exame %}
<div class="convocatoria-box">
    <h3 style="margin: 0 0 10px 0; color: #1e3a8a; text-transform: uppercase; font-size: 12pt;">Convocatória para Exame de Admissão</h3>
    <table style="width: 100%; margin-top: 10px;">
        <tr>
            <td style="width: 50%; text-align: right; padding-right: 15px; border-right: 1px solid #bfdbfe;">
                <div style="font-size: 9pt; color: #64748b;">DATA E HORA</div>
                <div style="font-size: 14pt; font-weight: bold; color: #1e3a8a;">{{ exame.data_exame|date:"d/m/Y - H:i" }}</div>
            </td>
            <td style="width: 50%; text-align: left; padding-left: 15px;">
                <div style="font-size: 9pt; color: #64748b;">LOCAL</div>
                <div style="font-size: 14pt; font-weight: bold; color: #1e3a8a;">SALA {{ exame.sala.numero_sala }}</div>
            </td>
        </tr>
    </table>
    <div style="margin-top: 12px; font-size: 9pt; color: #4b5563;">
        * É obrigatória a apresentação deste documento e do Bilhete de Identidade original.
    </div>
</div>
{% endif %}

<!-- Footer Section -->
<div style="position: absolute; bottom: 0; left: 0; width: 100%;">
    <div style="text-align: center; margin-bottom: 40px;">
        <div style="border-top: 1px dashed #94a3b8; width: 250px; margin: 0 auto 5px auto;"></div>
        <div style="font-size: 9pt; color: #475569;">Assinatura do Candidato</div>
    </div>

    <div style="border-top: 2px solid #e2e8f0; padding-top: 10px; font-size: 8pt; color: #94a3b8; display: flex; justify-content: space-between;">
        <div style="float: left;">Processado informaticamente em {{ hoje|date:"d/m/Y H:i" }}</div>
        <div style="float: right;">Sistema de Gestão Académica - v2.0</div>
    </div>
</div>
{% endblock %}
