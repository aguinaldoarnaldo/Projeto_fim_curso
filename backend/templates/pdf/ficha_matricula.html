{% extends "pdf/base_documento.html" %}

{% block content %}
<style>
    @page {
        size: A4;
        margin: 1cm;
        margin-top: 3.5cm; 
        margin-bottom: 2cm;
    }

    .ficha-container {
        font-family: 'Helvetica', 'Arial', sans-serif;
        color: #000;
        padding: 0;
    }

    /* Título do Documento */
    .main-title {
        text-align: center;
        font-size: 16pt;
        font-weight: bold;
        text-transform: uppercase;
        margin-bottom: 5px;
        border-bottom: 3px solid #000;
        padding-bottom: 5px;
    }

    .sub-title {
        text-align: center;
        font-size: 9pt;
        margin-bottom: 20px;
        letter-spacing: 1px;
    }

    /* Estilo das Caixas de Dados */
    /* Usamos tabelas para layout preciso no xhtml2pdf */
    table.layout-grid {
        width: 100%;
        border-collapse: separate; 
        border-spacing: 2px; /* Espaço entre as caixas */
        margin-bottom: 5px;
    }

    td.field-box {
        border: 1px solid #000;
        vertical-align: top;
        padding: 0;
        background-color: #fff;
    }

    .field-header {
        background-color: #ddd; /* Cinza para o cabeçalho do campo */
        color: #000;
        font-size: 7pt;
        font-weight: bold;
        text-transform: uppercase;
        padding: 2px 4px;
        border-bottom: 1px solid #000;
    }

    .field-content {
        padding: 4px 6px;
        font-size: 10pt;
        font-weight: bold;
        min-height: 14px;
    }

    /* Cabeçalhos de Seção Maiores */
    .section-bar {
        background-color: #000;
        color: #fff;
        font-size: 9pt;
        font-weight: bold;
        text-transform: uppercase;
        padding: 4px 5px;
        margin-top: 10px;
        margin-bottom: 2px;
    }

    /* Rodapé / Assinatura */
    .footer-section {
        margin-top: 30px;
        border-top: 2px solid #000;
        padding-top: 5px;
    }

    .termo {
        font-size: 8pt;
        text-align: justify;
        margin-bottom: 30px;
    }

    td.ass-box {
        text-align: center;
        padding-top: 40px;
        vertical-align: bottom;
    }
    
    .linha-ass {
        border-top: 1px solid #000;
        width: 90%;
        margin: 0 auto;
        font-size: 8pt;
        font-weight: bold;
        padding-top: 3px;
    }
</style>

<div class="ficha-container">

    <div class="main-title">Ficha de Matrícula</div>
    <div class="sub-title">COMPROVATIVO DE INSCRIÇÃO E FREQUÊNCIA - ANO LECTIVO {{ matricula.ano_lectivo.nome_ano|default:"2025/2026" }}</div>

    <!-- BLOCO 1: IDENTIFICAÇÃO DO REGISTO -->
    <div class="section-bar">I. DADOS DO REGISTO</div>
    <table class="layout-grid">
        <tr>
            <td class="field-box" width="25%">
                <div class="field-header">Nº Matrícula</div>
                <div class="field-content">{{ aluno.numero_matricula|default:"--" }}</div>
            </td>
            <td class="field-box" width="25%">
                <div class="field-header">Data Emissão</div>
                <div class="field-content">{% now "d/m/Y - H:i" %}</div>
            </td>
            <td class="field-box" width="25%">
                <div class="field-header">Situação</div>
                <div class="field-content">{{ matricula.situacao|default:"Confirmada"|upper }}</div>
            </td>
            <td class="field-box" width="25%">
                <div class="field-header">ID Sistema</div>
                <div class="field-content">#{{ matricula.id_matricula|default:"0000" }}</div>
            </td>
        </tr>
    </table>

    <!-- BLOCO 2: DADOS PESSOAIS -->
    <div class="section-bar">II. IDENTIFICAÇÃO DO ALUNO</div>
    <table class="layout-grid">
        <tr>
            <td class="field-box" colspan="4">
                <div class="field-header">Nome Completo</div>
                <div class="field-content">{{ aluno.nome_completo|upper|default:"--" }}</div>
            </td>
        </tr>
        <tr>
            <td class="field-box" width="30%">
                <div class="field-header">Bilhete de Identidade / Documento</div>
                <div class="field-content">{{ aluno.numero_bi|default:"--" }}</div>
            </td>
            <td class="field-box" width="20%">
                <div class="field-header">Data Nasc.</div>
                <div class="field-content">{{ aluno.data_nascimento|date:"d/m/Y"|default:"--" }}</div>
            </td>
            <td class="field-box" width="20%">
                <div class="field-header">Gênero</div>
                <div class="field-content">{{ aluno.genero|default:"--" }}</div>
            </td>
            <td class="field-box" width="30%">
                <div class="field-header">Estado Civil</div>
                <div class="field-content">{{ aluno.estado_civil|default:"Solteiro(a)" }}</div>
            </td>
        </tr>
        <tr>
            <td class="field-box" width="40%">
                <div class="field-header">Nacionalidade</div>
                <div class="field-content">{{ aluno.nacionalidade|default:"Angolana" }}</div>
            </td>
            <td class="field-box" width="60%">
                <div class="field-header">Naturalidade (Município/Província)</div>
                <div class="field-content">
                    {{ aluno.naturalizade|default:"--" }}
                </div>
            </td>
        </tr>
    </table>

    <!-- BLOCO 3: DADOS ACADÉMICOS -->
    <div class="section-bar">III. DADOS ACADÉMICOS</div>
    <table class="layout-grid">
        <tr>
            <td class="field-box" width="50%">
                <div class="field-header">Curso</div>
                <div class="field-content">{{ turma.id_curso.nome_curso|default:"--" }}</div>
            </td>
            <td class="field-box" width="25%">
                <div class="field-header">Classe</div>
                <div class="field-content">{{ turma.id_classe.nome_classe|default:"--" }}ª Classe</div>
            </td>
            <td class="field-box" width="25%">
                <div class="field-header">Ano Curricular</div>
                <div class="field-content">{{ matricula.ano_lectivo.nome_ano|default:"--" }}</div>
            </td>
        </tr>
        <tr>
            <td class="field-box" width="25%">
                <div class="field-header">Turma</div>
                <div class="field-content">{{ turma.codigo_turma|default:"--" }}</div>
            </td>
            <td class="field-box" width="25%">
                <div class="field-header">Sala</div>
                <div class="field-content">{{ turma.id_sala.numero_sala|default:"--" }}</div>
            </td>
            <td class="field-box" width="25%">
                <div class="field-header">Período</div>
                <div class="field-content">{{ turma.id_periodo.nome_periodo|default:"--" }}</div>
            </td>
            <td class="field-box" width="25%">
                <div class="field-header">Tipo Aluno</div>
                <div class="field-content">Interno</div>
            </td>
        </tr>
    </table>

    <!-- BLOCO 4: ENDEREÇO E CONTACTOS -->
    <div class="section-bar">IV. LOCALIZAÇÃO E CONTACTOS</div>
    <table class="layout-grid">
        <tr>
            <td class="field-box" width="50%">
                <div class="field-header">Morada (Município, Bairro, Rua)</div>
                <div class="field-content">
                    {{ aluno.municipio_residencia|default:"--" }}, {{ aluno.bairro_residencia|default:"--" }}
                </div>
            </td>
            <td class="field-box" width="25%">
                <div class="field-header">Telefone</div>
                <div class="field-content">{{ aluno.telefone|default:"--" }}</div>
            </td>
            <td class="field-box" width="25%">
                <div class="field-header">Email</div>
                <div class="field-content">{{ aluno.email|default:"--" }}</div>
            </td>
        </tr>
    </table>

    <!-- BLOCO 5: FILIAÇÃO -->
    <div class="section-bar">V. FILIAÇÃO</div>
    <table class="layout-grid">
        <tr>
            <td class="field-box" width="50%">
                <div class="field-header">Nome do Pai</div>
                <div class="field-content">{{ aluno.nome_pai|default:"--" }}</div>
            </td>
            <td class="field-box" width="50%">
                <div class="field-header">Nome da Mãe</div>
                <div class="field-content">{{ aluno.nome_mae|default:"--" }}</div>
            </td>
        </tr>
    </table>

    <!-- RODAPÉ E ASSINATURAS -->
    <div class="footer-section">
        <div class="termo">
            <strong>DECLARAÇÃO:</strong> Declaro que confirmo os dados acima apresentados e tomo conhecimento do regulamento interno da instituição, comprometendo-me a cumpri-lo integralmente, bem como honrar os pagamentos devidos.
        </div>

        <table class="layout-grid">
            <tr>
                <td class="ass-box" width="50%">
                    <div class="linha-ass">SECRETARIA ACADÉMICA</div>
                    <div style="font-size: 7pt;">(Assinatura e Carimbo)</div>
                </td>
                <td class="ass-box" width="50%">
                    <div class="linha-ass">O ALUNO(A) / ENCARREGADO</div>
                    <div style="font-size: 7pt;">(Assinatura Legível)</div>
                </td>
            </tr>
        </table>
    </div>

</div>
{% endblock %}
